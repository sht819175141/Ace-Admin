(function(a){a.omWidget("om.omProgressbar",{options:{value:0,text:"{value}%",width:"auto",max:100},min:0,_create:function(){var b=this.element;b.addClass("om-progressbar om-widget om-widget-content om-corner-all");this.textDiv=a("<div class='om-progressbar-text'></div>").appendTo(b);this.valueDiv=a("<div class='om-progressbar-value om-widget-header om-corner-left'></div>").appendTo(b)},_init:function(){var b=this.element.width();if(typeof(this.options.width)=="number"){b=this.options.width;this.element.width(b)}this.textDiv.width(Math.floor(b));this.oldValue=this._value();this._refreshValue()},value:function(b){if(b===undefined){return this._value()}this.options.value=b;this._refreshValue()},_value:function(){var b=this.options.value;if(typeof b!=="number"){b=0}return Math.min(this.options.max,Math.max(this.min,b))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var d=this,f=d.value(),c=d.options.onChange;var b=d._percentage();var g=d.options.text,e="";d.valueDiv.toggle(f>d.min).toggleClass("om-corner-right",f===d.options.max).width(b.toFixed(0)+"%");if(typeof(g)=="function"){e=g.call(f,f)}else{if(typeof(g)=="string"){e=g.replace("{value}",f)}}d.textDiv.html(e);if(d.oldValue!==f){c&&d._trigger("onChange",null,f,d.oldValue);d.oldValue=f}}})})(jQuery);