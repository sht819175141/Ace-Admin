(function(a){var b=function(e,h,f){var d=e.indexOf(".");if(isNaN(e)&&e!="."){for(;isNaN(e);){e=e.substring(0,e.length-1)}}if(!f.allowNegative&&e.indexOf("-")!=-1){var g=e.split("-");e=g.join("")}if(!f.allowDecimals&&d!=-1||e.charAt(e.length-1)==="."){return e.substring(0,d)}if(d!=-1){e=e.substring(0,d+f.decimalPrecision+1)}return e.length>0?parseFloat(e):""};a.omWidget("om.omNumberField",{options:{allowDecimals:true,allowNegative:true,decimalPrecision:2,disabled:false,onBlur:function(c){},readOnly:false},_create:function(){var d=this.options,c=this;this.element.addClass("om-numberfield om-widget om-state-default om-state-nobg").css("ime-mode","disabled");this.element.keypress(function(h){if(h.which==null&&(h.charCode!=null||h.keyCode!=null)){h.which=h.charCode!=null?h.charCode:h.keyCode}var f=h.which;if(f===8||(f==46&&h.button==-1)||f===0){return}var g=String.fromCharCode(f);a.data(this,"character",g);var i=a.data(this,"allowed");if(i.indexOf(g)===-1||(a(this).val().indexOf("-")!==-1&&g=="-")||(a(this).val().indexOf(".")!==-1&&g==".")){h.preventDefault()}}).focus(function(){a(this).addClass("om-state-focus")}).blur(function(g){a(this).removeClass("om-state-focus");var f=a.data(this,"character");this.value=b(this.value,f,d);c._trigger("onBlur",g,this.value)}).keydown(function(f){c._checkLast(this);if(229===f.which){f.preventDefault()}}).keyup(function(f){c._checkLast(this)}).bind("cut paste",function(f){return false})},_init:function(){var e=this.element,c=this.options;if(typeof c.disabled!=="boolean"){c.disabled=e.attr("disabled")}if(c.readOnly){e.attr("readonly","readonly")}var d=a.data(e[0],"character");this._buildAllowChars();if(c.disabled){this.disable()}else{this.enable()}},_checkLast:function(e){var d=e.value,c=d.length;if(d&&a.data(e,"allowed").indexOf(d.charAt(c-1))===-1||d.indexOf(".")!=d.lastIndexOf(".")||d.indexOf("-")!=d.lastIndexOf("-")){e.value=d=d.substring(0,(c--)-1)}},_buildAllowChars:function(){var c="0123456789";if(this.options.allowDecimals){c=c+"."}if(this.options.allowNegative){c=c+"-"}if(this.options.readOnly){c=""}a.data(this.element[0],"allowed",c)},disable:function(){this.element.attr("disabled",true).addClass("om-numberfield-disabled")},enable:function(){this.element.attr("disabled",false).removeClass("om-numberfield-disabled")}})})(jQuery);