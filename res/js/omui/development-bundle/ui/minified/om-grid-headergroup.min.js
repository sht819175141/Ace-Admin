(function(c){c.omWidget.addBeforeInitListener("om.omGrid",function(){var f=this._getColModel();if(!c.isArray(f)||f.length<=0||!c.isArray(f[0])){return}d(this);this.hDiv.addClass("hDiv-group-header");c.extend(this,{_getColModel:function(){return this._colModel},_getHeaderCols:function(){var g=[],j=this.options,i=this.hDiv,h=i.find("th[axis^='col']");c(h).each(function(){g.push(this)});g.sort(function(l,k){return l.axis.slice(3)-k.axis.slice(3)});!j.singleSelect&&g.unshift(i.find("th[axis='checkboxCol']")[0]);j.showIndex&&g.unshift(i.find("th[axis='indexCol']")[0]);j.rowDetailsProvider&&g.unshift(i.find("th[axis='expenderCol']")[0]);return c(g)},_buildTableHead:function(){var r=this.options,g=this.element,k=g.closest(".om-grid"),p=r.colModel,y=0,o=-1,A="<th class='$' $ $ $ $ $><div class='$' style='text-align:$; $'>$</div></th>",v=["<thead>"],u,z,m,s;for(var x=0,n=p.length;x<n;x++){v.push("<tr>");if(x==0){if(r.showIndex){v.push("<th class='indexCol data-header-"+n+"' align='center' axis='indexCol' rowspan="+n+"><div class='indexheader' style='text-align:center;width:25px;' /></th>")}if(!r.singleSelect){v.push("<th class='checkboxCol data-header-"+n+"' align='center' axis='checkboxCol' rowspan="+n+"><div class='checkboxheader' style='text-align:center;width:17px;'><span class='checkbox'/></div></th>")}}m=p[x];for(var w=0,l=m.length;w<l;w++){z=m[w];var q=z.width||60,t=z.align||"center",B=z.name;if(z.name&&q=="autoExpand"){q=0;o=b(this,z)}var h=z.wrap?"wrap":"";h+=(z.name?" data-header-":" group-header-")+(z.rowspan?z.rowspan:1);u=[h,z.align?"align="+z.align:"",B?"axis=col"+b(this,z):"",B?"abbr="+B:"",z.rowspan?"rowspan="+z.rowspan:"",z.colspan?"colspan="+z.colspan:"",z.wrap?"wrap":"",t,B?"width:"+q+"px":"",z.header];e(v,u,A);if(z.name){y+=q}}v.push("</tr>")}v.push("</thead>");c("table",this.hDiv).html(v.join(""));s=c("thead",this.hDiv);this._fixHeaderWidth(o,y);this.thead=s;s=null}})});function b(h,k){var g=h._getColModel();for(var j=0,f=g.length;j<f;j++){if(g[j].name==k.name){return j}}}function e(h,i,g){var f=0;h.push(g.replace(/\$/g,function(){return i[f++]}))}function d(s){s._colModel=[];var p=s._getColModel(),o=[],k=[],u=1,n=1,m,r,q,l=p.length;for(var h=0;h<l;h++){o[h]=[]}for(var h=0,t=l;h<t;h++){m=p[h];for(var g=0,f=m.length;g<f;g++){r=m[g];u=r.rowspan||1;n=r.colspan||1;q=a(o,h,u,n);if(r.name){k.push({header:r,colIndex:q})}}}k.sort(function(j,i){return j.colIndex-i.colIndex});h=0;while(k[h]&&s._colModel.push(k[h++].header)){}}function a(g,l,n,o){var m=0;while(g[l][m]&&++m){}for(var h=l;h<l+n;h++){for(var f=m;f<m+o;f++){g[h][f]=true}}return m}})(jQuery);