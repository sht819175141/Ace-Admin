(function(a){a.omWidget("om.omSlider",{options:{autoPlay:true,interval:5000,directionNav:false,pauseOnHover:true,controlNav:true,activeNavCls:"nav-selected",effect:"fade",animSpeed:400,startSlide:0,delay:200,onBeforeSlide:function(b){},onAfterSlide:function(b){}},slideTo:function(b){opts=this.element.data("omSlider:opts");this._slideTo(this.element,b)},next:function(){opts=this.element.data("omSlider:opts");this._next(this.element)},prev:function(){opts=this.element.data("omSlider:opts");this._prev(this.element)},destroy:function(){var c=this.element,b=this.options,d=this._getSliderVars(c);clearTimeout(d.slideTimer);clearInterval(d.autoPlayTimer);if(d.customNav){a(b.controlNav).children().unbind(".omSlider").removeData("sid").removeClass(b.activeNavCls)}},_getSliderVars:function(b){return b.data("omSlider:vars")},_runSlideEffect:function(c,f,n){var h=this,g=this._getSliderVars(c),l=c.find("ul.om-slider-content:first"),j=l.children(),b=this.options,i=0,d=0;var m=n?n:b.effect;if(b.effect=="random"){l.addClass("om-slider-effect-"+m)}l.stop();if(m=="slide-v"||m=="slide-h"){var e=(m=="slide-v");if(b.effect=="random"){var k=0;j.each(function(o){if(o!==g.currentSlide){k-=(e?a(this).height():a(this).width())}else{return false}});l.css(e?"top":"left",k)}j.each(function(o){if(o==f){return false}e?i-=a(this).height():d-=a(this).width()})}else{return false}g.running=true;l.animate({top:i,left:d},b.animSpeed,function(){g.running=false;h._trigger("onAfterSlide",null,f)})},_runFadeEffect:function(f,d){var b=this,g=this._getSliderVars(f),c=f.find("ul.om-slider-content:first").children(),e=this.options;c.each(function(i){var h=a(this);if(i==d){g.running=true;h.fadeIn(e.animSpeed,function(){g.running=false;b._trigger("onAfterSlide",null,d)})}else{if(i==g.currentSlide){h.fadeOut(e.animSpeed)}}})},_runNoEffect:function(f,d){var b=this,g=this._getSliderVars(f),e=this.options,c=f.find("ul.om-slider-content:first").children();c.each(function(i){var h=a(this);if(i==d){h.show();b._trigger("onAfterSlide",null,d)}else{if(i==g.currentSlide){h.hide()}}})},_toggleControlNav:function(f,c){var g=this._getSliderVars(f);var e=this.options;var d=f;if(g.customNav){d=a("body")}var b=d.find(g.controlNav).children();b.each(function(h){a(this).toggleClass(e.activeNavCls,h==c)})},_slideTo:function(f,c){var g=this._getSliderVars(f),h=f.find("ul.om-slider-content:first");var e=this.options,b=this;if(isNaN(c)||c<0||c>=g.totalSlides){return}if(this._trigger("onBeforeSlide",null,c)===false){return false}if(e.effect=="random"){var i=["fade","slide-h","slide-v"];var d=i[Math.floor(Math.random()*3)];h.removeClass().addClass("om-slider-content");h.removeAttr("style");h.find("li").removeAttr("style");if(d=="slide-h"||d=="slide-v"){b._runSlideEffect(f,c,d)}else{b._runFadeEffect(f,c)}}else{if(e.effect=="slide-h"||e.effect=="slide-v"){b._runSlideEffect(f,c)}else{if(e.effect=="fade"||e.effect===true){b._runFadeEffect(f,c)}else{b._runNoEffect(f,c)}}}if(g.controlNav){b._toggleControlNav(f,c)}g.currentSlide=c;return f},_next:function(c){var d=this._getSliderVars(c),b=0;if(d.currentSlide+2<=d.totalSlides){b=d.currentSlide+1}return this._slideTo(c,b)},_prev:function(c){var d=this._getSliderVars(c),b=d.totalSlides-1;if(d.currentSlide!=0){b=d.currentSlide-1}return this._slideTo(c,b)},_processDirectionNav:function(d){var e=this._getSliderVars(d),c=a('<div class="om-slider-directionNav">').appendTo(d),b=this;a('<a class="om-slider-prevNav"></a>').appendTo(c).click(function(){if(e.running){return false}b._prev(d)});a('<a class="om-slider-nextNav"></a>').appendTo(c).click(function(){if(e.running){return false}b._next(d)});d.hover(function(){c.show()},function(){c.hide()})},_processControlNav:function(g){var h=this._getSliderVars(g),f=this.options,e=this,i;if(f.controlNav===true||f.controlNav==="classical"){var b=a('<ul class="om-slider-nav-classical"></ul>');h.controlNav=".om-slider-nav-classical";for(i=0;i<h.totalSlides;i++){var c=a("<li>"+(i+1)+"</li>");c.data("sid",i);var d=0;c.click(function(){e._slideTo(g,a(this).data("sid"))});c.hover(function(){if(h.running||h.stop){return false}var j=a(this);if(j.hasClass(f.activeNavCls)){return false}h.slideTimer=d=setTimeout(function(){e._slideTo(g,j.data("sid"))},f.delay)},function(){clearTimeout(d)});b.append(c)}g.append(b)}else{if(f.controlNav==="dot"){var b=a('<div class="om-slider-nav-dot"></div>');h.controlNav=".om-slider-nav-dot";for(i=0;i<h.totalSlides;i++){var c=a('<a href="javascript:void(0)">'+(i+1)+"</a>");c.data("sid",i);var d=0;c.click(function(){e._slideTo(g,a(this).data("sid"))});c.hover(function(){if(h.running||h.stop){return false}var j=a(this);if(j.hasClass(f.activeNavCls)){return false}h.slideTimer=d=setTimeout(function(){e._slideTo(g,j.data("sid"))},f.delay)},function(){clearTimeout(d)});b.append(c)}b.appendTo(g).css({marginLeft:-1*b.width()/2})}else{if(a(f.controlNav).length>0){h.controlNav=f.controlNav;h.customNav=true;var b=a(f.controlNav);b.children().each(function(l){var j=a(this);j.data("sid",l);var k=0;j.bind("click.omSlider",function(){e._slideTo(g,a(this).data("sid"))});j.bind("mouseover.omSlider",function(){if(h.running||h.stop){return false}var m=a(this);if(m.hasClass(f.activeNavCls)){return false}h.slideTimer=k=setTimeout(function(){e._slideTo(g,m.data("sid"))},f.delay)}).bind("mouseout.omSlider",function(){clearTimeout(k)})})}}}},_create:function(){var h=0;var g=this.element;var b=this;var e=this.options;var f={currentSlide:0,totalSlides:0,running:false,paused:false,stop:false,controlNav:".om-slider-nav-classical"};g.data("omSlider",g).data("omSlider:vars",f).data("omSlider:opts",e).addClass("om-slider");if(e.startSlide>0){f.currentSlide=e.startSlide}var d=g.children();d.wrapAll('<ul class="om-slider-content"></ul>').wrap('<li class="om-slider-item"></li>');if(e.effect=="slide-v"||e.effect=="slide-h"){g.find(".om-slider-content").addClass("om-slider-effect-"+e.effect)}f.totalSlides=d.length;this._processControlNav(g);function c(k,j){if(isNaN(j)||j<0||j>=f.totalSlides){return}var n=k.find("ul.om-slider-content:first"),i=n.children(),m=0,l=0;if(e.effect=="slide-h"){i.each(function(o){if(o==j){return false}l-=a(this).width()});setTimeout(function(){n.css({left:l,top:m})},0)}else{if(e.effect=="slide-v"){i.each(function(o){if(o==j){return false}m-=a(this).height()});setTimeout(function(){n.css({left:l,top:m})},0)}else{n.children().eq(j).show()}}if(f.controlNav){b._toggleControlNav(k,j)}if(e.autoPlay){f.autoPlayTimer=h=setInterval(function(){b._next(k)},e.interval)}if(e.pauseOnHover){k.hover(function(){f.paused=true;clearInterval(h)},function(){f.paused=false;if(e.autoPlay){f.autoPlayTimer=h=setInterval(function(){b._next(k)},e.interval)}})}if(e.directionNav){b._processDirectionNav(k)}}if(e.startSlide>0&&(e.effect=="slide-h"||e.effect=="slide-v")){a(window).load(function(){c(g,e.startSlide)})}else{c(g,e.startSlide)}}})})(jQuery);