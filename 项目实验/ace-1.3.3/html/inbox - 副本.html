<!DOCTYPE html>
<html lang="en">
	<head>
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
		<meta charset="utf-8" />
		<title>Inbox - Ace Admin</title>

		<meta name="description" content="Mailbox with some customizations as described in docs" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />

		<!-- bootstrap & fontawesome -->
		<link rel="stylesheet" href="../assets/css/bootstrap.css" />
		<link rel="stylesheet" href="../assets/css/font-awesome.css" />

		<!-- page specific plugin styles -->

		<!-- text fonts -->
		<link rel="stylesheet" href="../assets/css/ace-fonts.css" />

		<!-- ace styles -->
		<link rel="stylesheet" href="../assets/css/ace.css" class="ace-main-stylesheet" id="main-ace-style" />
	</head>

	<body class="no-skin">

		<form id="id-message-form" class="form-horizontal message-form col-xs-12">
			<div class="form-group no-margin-bottom">
				<label class="col-sm-3 control-label no-padding-right">Attachments:</label>

				<div class="col-sm-9">
					<div id="form-attachments">
						<input type="file" name="attachment[]" />
					</div>
				</div>
			</div>

			<div class="align-right">
				<button id="id-add-attachment" type="button" class="btn btn-sm btn-danger">Add Attachment</button>
			</div>
		</form>

		<!--[if !IE]> -->
		<script type="text/javascript">
			window.jQuery || document.write("<script src='../assets/js/jquery.js'>"+"<"+"/script>");
		</script>
		<script type="text/javascript">
			if('ontouchstart' in document.documentElement) document.write("<script src='../assets/js/jquery.mobile.custom.js'>"+"<"+"/script>");
		</script>
		<script src="../assets/js/bootstrap.js"></script>
		<script src="../assets/js/ace/elements.fileinput.js"></script> <!--起作用-->
		
		<script src="../assets/js/ace/ace.js"></script>

		<!-- inline scripts related to this page -->
		<script type="text/javascript">
			$('.message-form input[type=file]').ace_file_input().closest('.ace-file-input').addClass('width-90 inline')
			.wrap('<div class="form-group file-input-container"><div class="col-sm-7"></div></div>');
	
			$('#id-add-attachment').on('click', function(){
				var file = $('<input type="file" name="attachment[]" />').appendTo('#form-attachments');
				file.ace_file_input();
				
				file.closest('.ace-file-input')
				.addClass('width-90 inline')
				.wrap('<div class="form-group file-input-container"><div class="col-sm-7"></div></div>')
				.parent().append('<div class="action-buttons pull-right col-xs-1">\
					<a href="#" data-action="delete" class="middle">\
						<i class="ace-icon fa fa-trash-o red bigger-130 middle"></i>\
					</a>\
				</div>')
				.find('a[data-action=delete]').on('click', function(e){
					//the button that removes the newly inserted file input
					e.preventDefault();
					$(this).closest('.file-input-container').hide(300, function(){ $(this).remove() });
				});
			});
		</script>
	</body>
</html>
